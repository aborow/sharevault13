<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <template id="website_blog.post_heading">
        <t t-if="not blog_post.webpage_id">
            <a t-attf-href="/resources/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}"
               t-field="blog_post.name"
               t-attf-class="d-block text-reset text-decoration-none o_blog_post_title my-0 #{'h3' if opt_blog_list_view else ('h5' if opt_blog_readable else 'h6')}">
               Untitled Post
           </a>
        </t>

        <t t-if="blog_post.webpage_id">
           <a t-attf-href="#{blog_post.webpage_id.url}"
              t-field="blog_post.name"
              t-attf-class="d-block text-reset text-decoration-none o_blog_post_title my-0 #{'h3' if opt_blog_list_view else ('h5' if opt_blog_readable else 'h6')}">
              Untitled Post
          </a>
        </t>

        <div t-if="not opt_posts_loop_show_cover and opt_posts_loop_show_author" class="text-muted small mt-2">
            by <span t-field="blog_post.author_id"/>
        </div>
    </template>


    <!-- ======   Sub-Template: Posts list : Posts Teaser + Tags  ============= -->
    <template id="website_blog.post_teaser">
        <t t-if="not blog_post.webpage_id">
            <a t-attf-href="/resources/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}" class="text-reset text-decoration-none">
                <div t-if="opt_blog_list_view" t-field="blog_post.teaser" class="mt-2 o_wblog_read_text"/>
                <div t-else="" t-field="blog_post.teaser" t-attf-class="mt-2 #{opt_blog_readable and 'o_wblog_normalize_font'}"/>
            </a>

            <!-- Tags -->
            <div t-if="len(blog_post.tag_ids)" class="o_wblog_post_short_tag_section d-flex align-items-center flex-wrap pt-2">
                <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                    <a t-attf-href="#{blog_url(tag=tags_list(active_tag_ids, one_tag.id))}"
                       t-attf-class="badge mb-2 mr-1 text-truncate #{one_tag.id in active_tag_ids and 'badge-primary' or 'border'}"
                       t-esc="one_tag.name"/>
                </t>
            </div>
        </t>

        <t t-if="blog_post.webpage_id">
            <a t-attf-href="#{blog_post.webpage_id.url}" class="text-reset text-decoration-none">
                <div t-if="opt_blog_list_view" t-field="blog_post.teaser" class="mt-2 o_wblog_read_text"/>
                <div t-else="" t-field="blog_post.teaser" t-attf-class="mt-2 #{opt_blog_readable and 'o_wblog_normalize_font'}"/>
            </a>

            <!-- Tags -->
            <div t-if="len(blog_post.tag_ids)" class="o_wblog_post_short_tag_section d-flex align-items-center flex-wrap pt-2">
                <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                    <a t-attf-href="#{blog_url(tag=tags_list(active_tag_ids, one_tag.id))}"
                       t-attf-class="badge mb-2 mr-1 text-truncate #{one_tag.id in active_tag_ids and 'badge-primary' or 'border'}"
                       t-esc="one_tag.name"/>
                </t>
            </div>
        </t>
    </template>



    <!-- ======   Sub-Template: Posts list : Posts Cover  ====================== -->
    <template id="website_blog.post_cover_image">
        <t t-if="opt_blog_cards_design and not opt_blog_list_view" t-set="classes" t-value="'card-img-top mb-2'"/>
        <t t-if="not opt_blog_cards_design and opt_blog_list_view" t-set="classes" t-value="'o_wblog_post_cover_nocard'"/>


        <t t-if="not blog_post.webpage_id">
            <a t-attf-href="/resources/#{slug(blog_post.blog_id)}/post/#{slug(blog_post)}"
               t-attf-class="text-decoration-none d-block #{classes or 'mb-2'}"
               t-att-style="not blog_post.website_published and 'opacity:0.6;'">

                <t t-call="website.record_cover">
                    <t t-set="_record" t-value="blog_post"/>
                    <t t-set="additionnal_classes" t-value="'o_list_cover o_not_editable ' + (not opt_blog_cards_design and ' rounded overflow-hidden shadow mb-3' or '')"/>

                    <t t-if="opt_posts_loop_show_author" t-call="website_blog.post_author">
                        <t t-set="additionnal_classes" t-value="'o_wblog_post_list_author o_list_cover d-flex text-white w-100 o_not_editable ' + ('p-3 h5 m-0' if opt_blog_list_view else 'px-2 pb-2 pt-3') "/>
                        <t t-set="hide_date" t-value="True"/>
                    </t>
                </t>
            </a>
        </t>

        <t t-if="blog_post.webpage_id">
            <a t-attf-href="#{blog_post.webpage_id.url}"
               t-attf-class="text-decoration-none d-block #{classes or 'mb-2'}"
               t-att-style="not blog_post.website_published and 'opacity:0.6;'">

                <t t-call="website.record_cover">
                    <t t-set="_record" t-value="blog_post"/>
                    <t t-set="additionnal_classes" t-value="'o_list_cover o_not_editable ' + (not opt_blog_cards_design and ' rounded overflow-hidden shadow mb-3' or '')"/>

                    <t t-if="opt_posts_loop_show_author" t-call="website_blog.post_author">
                        <t t-set="additionnal_classes" t-value="'o_wblog_post_list_author o_list_cover d-flex text-white w-100 o_not_editable ' + ('p-3 h5 m-0' if opt_blog_list_view else 'px-2 pb-2 pt-3') "/>
                        <t t-set="hide_date" t-value="True"/>
                    </t>
                </t>
            </a>
        </t>
    </template>


</odoo>
